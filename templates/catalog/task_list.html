{% extends "base.html" %}

{% block heading %}
TODO List
{% endblock %}

{% block add_task_button %}
<div class="d-flex justify-content-end">
  <a href="{% url 'catalog:add_task' %}" class="btn btn-primary">Add task</a>
</div>
{% endblock %}

{% block content %}
<div class="task-list">
  {% for task in tasks %}
  <div class="task-block">
    <div class="task-content">
      <strong>{{ task.content }}</strong>
      <div>
        {% if not task.is_done %}
        <a href="{% url 'catalog:complete_undo_task' task.pk %}" class="btn btn-success btn-sm float-right">Complete</a>
        {% else %}
        <a href="{% url 'catalog:complete_undo_task' task.pk %}" class="btn btn-danger btn-sm float-right undo-button" style="background-color: gray;">Undo</a>
        {% endif %}
      </div>
    </div>
    <div class="task-details">
      <p style="font-size: 0.8em;"> Created: {{ task.create_at|date:"F d, Y" }}{% if task.deadline %} <span style="color: brown;"> Deadline: {{ task.deadline|date:"F d, Y" }}{% endif %}</span></p>
      <p>Tag: {% for tag in task.tags.all %}
          {{ tag.name }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
        <a href="{% url 'catalog:task-update' task.pk %}">Update</a>
        <a href="{% url 'catalog:task-delete' task.pk %}">Delete</a>
      </p>
    </div>
  </div>
  <hr style="border-top: 1px solid #ccc; margin: 10px 0;">
  {% endfor %}
</div>
{% endblock %}
